[supervisord]
nodaemon=true
logfile=/dev/null
logfile_maxbytes=0
pidfile=/tmp/supervisord.pid

[program:api]
command=python -m uvicorn app.main:app --host %(ENV_PRINTARR_HOST)s --port %(ENV_PRINTARR_PORT)s
directory=/app/backend
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
redirect_stderr=true

# Workers will be added in future versions
# [program:ingestion-worker]
# command=python -m app.workers.ingestion
# directory=/app/backend
# autostart=true
# autorestart=true
# stdout_logfile=/dev/fd/1
# stdout_logfile_maxbytes=0
# redirect_stderr=true

# [program:download-worker]
# command=python -m app.workers.download
# directory=/app/backend
# autostart=true
# autorestart=true
# stdout_logfile=/dev/fd/1
# stdout_logfile_maxbytes=0
# redirect_stderr=true

# [program:preview-worker]
# command=python -m app.workers.preview
# directory=/app/backend
# autostart=true
# autorestart=true
# stdout_logfile=/dev/fd/1
# stdout_logfile_maxbytes=0
# redirect_stderr=true
